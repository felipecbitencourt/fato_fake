<!-- Chart.js - Visualiza√ß√£o de Dados sobre Fake News -->
<div class="content-container">
    <header class="page-header-section">
        <h1>üìä Tend√™ncias de Busca: Fake News no Brasil</h1>
        <p class="page-subtitle">Analise como o interesse pelo tema evoluiu ao longo dos anos</p>
    </header>

    <section class="content-section">
        <div class="intro-box">
            <p>Os gr√°ficos abaixo mostram a evolu√ß√£o do interesse de busca pelos termos <strong>"fake news"</strong> e
                <strong>"desinforma√ß√£o"</strong> no Brasil. Observe os picos de busca e tente relacion√°-los com eventos
                importantes (elei√ß√µes, pandemia, esc√¢ndalos pol√≠ticos).
            </p>
        </div>

        <!-- Gr√°fico 1: Fake News ao longo do tempo -->
        <div class="data-card">
            <h3>üîç Interesse ao longo do tempo: "fake news"</h3>
            <canvas id="chartFakeNews"></canvas>
            <span class="chart-source"><strong>Fonte:</strong> Google Trends Brasil. Dados normalizados (0-100)
                representando o volume de busca relativo (2015-2024). O pico de 100 em 2018 coincide com as
                elei√ß√µes.</span>
        </div>

        <!-- Gr√°fico 2: Compara√ß√£o de termos -->
        <div class="data-card">
            <h3>üìà Compara√ß√£o: "fake news" vs "desinforma√ß√£o"</h3>
            <canvas id="chartComparison"></canvas>
            <span class="chart-source"><strong>Fonte:</strong> Google Trends Brasil. Comparativo de volume
                relativo.</span>
        </div>

        <!-- An√°lise contextual -->
        <div class="story-block info">
            <h3>üßê O que podemos observar?</h3>
            <ul>
                <li><strong>2018:</strong> Explos√£o de buscas durante as elei√ß√µes presidenciais brasileiras</li>
                <li><strong>2020:</strong> Novo pico durante a pandemia de COVID-19 e desinforma√ß√£o sobre vacinas</li>
                <li><strong>2022:</strong> Mais um pico em ano eleitoral, confirmando o padr√£o</li>
            </ul>
            <div class="highlight-text" style="color: #333;">
                üí° <strong>Reflex√£o:</strong> O interesse por "fake news" aumenta em momentos
                de tens√£o pol√≠tica e social. Isso mostra como a desinforma√ß√£o se torna pauta quando
                decis√µes importantes est√£o em jogo.
            </div>
        </div>

        <!-- Gr√°fico 3: Categorias de Fake News -->
        <div class="data-card">
            <h3>üéØ Principais Categorias de Desinforma√ß√£o no Brasil</h3>
            <div style="max-width: 400px; margin: 0 auto;">
                <canvas id="chartCategories"></canvas>
            </div>
            <span class="chart-source"><strong>Fonte:</strong> Pesquisa 'Cren√ßa em Fake News' (Fev/2024). Percentual de
                entrevistados que admitiram acreditar em not√≠cias falsas de cada tema.</span>
        </div>

        <!-- Atividade de reflex√£o -->
        <div class="highlight-box sabia">
            <div>
                <h3>‚úçÔ∏è Atividade de Reflex√£o</h3>
                <p>Com base nos gr√°ficos apresentados, responda:</p>
                <ol style="padding-left: 20px; line-height: 1.6;">
                    <li>Por que voc√™ acha que o termo "fake news" ganhou tanta popularidade a partir de 2018?</li>
                    <li>Qual a diferen√ßa entre "fake news" e "desinforma√ß√£o"? Por que um termo √© mais buscado que o
                        outro?</li>
                    <li>Como voc√™ acha que ser√° a tend√™ncia nos pr√≥ximos anos?</li>
                </ol>
            </div>
        </div>
    </section>
</div>

<script>
    // Expor a fun√ß√£o globalmente para que app.js possa cham√°-la
    window.initCharts = function () {
        // Verificar se Chart.js est√° carregado
        if (typeof Chart === 'undefined') {
            setTimeout(window.initCharts, 100);
            return;
        }

        // Verificar se os canvas existem
        const canvas1 = document.getElementById('chartFakeNews');
        const canvas2 = document.getElementById('chartComparison');
        const canvas3 = document.getElementById('chartCategories');

        if (!canvas1 || !canvas2 || !canvas3) {
            // setTimeout(window.initCharts, 100); // Removed loop, script execution allows retry if needed but executeScripts handles it
            return;
        }

        // Evitar reinicializa√ß√£o se j√° houver chart
        if (canvas1.chart) return;

        // Cores do tema
        const primaryColor = '#E53935';
        const secondaryColor = '#1976D2';

        // Dados centralizados
        const db = window.Module3Data.intro;

        // Gr√°fico 1: Fake News ao longo do tempo
        new Chart(canvas1, {
            type: 'line',
            data: {
                labels: db.fakeNews.labels,
                datasets: [{
                    label: 'Interesse por "fake news"',
                    data: db.fakeNews.data,
                    borderColor: primaryColor,
                    backgroundColor: 'rgba(229, 57, 53, 0.1)',
                    borderWidth: 3,
                    fill: true,
                    tension: 0.4,
                    pointRadius: 6,
                    pointBackgroundColor: primaryColor,
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: { display: true, position: 'top' },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                return 'Interesse relativo: ' + context.raw + '%';
                            }
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        title: { display: true, text: 'Interesse Relativo (%)' }
                    },
                    x: {
                        title: { display: true, text: 'Ano' }
                    }
                }
            }
        });

        // Gr√°fico 2: Compara√ß√£o fake news vs desinforma√ß√£o
        new Chart(canvas2, {
            type: 'line',
            data: {
                labels: db.fakeNews.labels, // Same labels
                datasets: [
                    {
                        label: '"fake news"',
                        data: db.comparison.dataFake,
                        borderColor: primaryColor,
                        backgroundColor: 'rgba(229, 57, 53, 0.05)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    },
                    {
                        label: '"desinforma√ß√£o"',
                        data: db.comparison.dataDisinfo,
                        borderColor: secondaryColor,
                        backgroundColor: 'rgba(25, 118, 210, 0.05)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4
                    }
                ]
            },
            options: {
                responsive: true,
                plugins: { legend: { display: true, position: 'top' } },
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        title: { display: true, text: 'Interesse Relativo (%)' }
                    }
                }
            }
        });

        // Gr√°fico 3: Categorias de Fake News (Doughnut)
        new Chart(canvas3, {
            type: 'doughnut',
            data: {
                labels: db.categories.labels,
                datasets: [{
                    data: db.categories.data,
                    backgroundColor: ['#E53935', '#1976D2', '#9C27B0', '#FF9800', '#43A047', '#757575'],
                    borderWidth: 2,
                    borderColor: '#fff'
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: { display: true, position: 'bottom' },
                    tooltip: {
                        callbacks: {
                            label: function (context) {
                                return context.label + ': ' + context.raw + '%';
                            }
                        }
                    }
                }
            }
        });

        console.log('Charts initialized successfully!');
    }

    // Iniciar ap√≥s pequeno delay para garantir que tudo carregou
    setTimeout(initCharts, 200);
</script>